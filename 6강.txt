6.Express ì›¹ì„œë²„ ë§Œë“¤ê¸°
6.1 Express í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°
1) express generator ì‚¬ìš©
2) ì§ì ‘êµ¬ì„±: ê¶Œì¥

* express í”„ë¡œì íŠ¸ ì‹œì‘í•˜ê¸°
1) npm init ==> package.json
2) express íŒ¨í‚¤ì§€ ì„¤ì¹˜
    npm i express
3) nodemon ëª…ë ¹ì–´ ì„¤ì¹˜
   node.exe monitorë¼ê³  ìƒê°í•˜ë©´ ë¨ : ì„œë²„ ìˆ˜ì •ì‹œ ì„œë²„ì˜ ì¬ì‹œì‘ ìë™í™”
   npm i -D nodemon

4) app.js ì‘ì„±      //process.env.Port ì—†ìœ¼ë©´ 3000í¬íŠ¸
5) npm start ì„œë²„ ì‹¤í–‰
6) http://localhost:3000/ ì ‘ì†í…ŒìŠ¤íŠ¸  

7) í´ë” ì‘ì„±
views, models, routes
MACëª¨ë¸


6.2 ìì£¼ ì‚¬ìš©ë˜ëŠ” ë¯¸ë“¤ì›¨ì–´
* Middleware : ìš”ì²­ê³¼ ì‘ë‹µ ì‚¬ì´ì— ì–´ë–¤ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê²ƒ
* ì‚¬ìš©ì ì •ì˜ ë¯¸ë“¤ì›¨ì–´
233 í˜ì´ì§€

* ë‹¤ì–‘í•œ ë¯¸ë“¤ì›¨ì–´ê°€ ìˆìŒ 
1) ë¯¸ë“¤ì›¨ì–´ íŒ¨í‚¤ì§€ ì„¤ì¹˜
npm 1 morgan cookie-parser express-session

2) ë„êµ¬ íŒ¨í‚¤ì§€ ì„¤ì¹˜ : process.env ê´€ë¦¬ ë„êµ¬
npm i dotenv

3) app.js
4) .envíŒŒì¼ ì‘ì„±

6.2.1 morgan
logì²˜ë¦¬ ê´€ë ¨

GET         /           500                   7.408 ms  - 50
ìš”ì²­ë©”ì„œë“œ   ìš”ì²­ì£¼ì†Œ        ì‘ë‹µì½”ë“œ(httpìƒíƒœì½”ë“œ)     ì‘ë‹µì†ë„ - ì‘ë‹µë°”ì´íŠ¸

6.2.2 static
 ì •ì  resourceë“¤ì— ëŒ€í•œ ë¯¸ë“¤ì›¨ì–´

6.2.3 body-parser
 ìš”ì²­ ë³¸ë¬¸ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´
 req.bodyì— ìš”ì²­ë³¸ë¬¸ì²˜ë¦¬í•œ ê°ì²´ë¥¼ ì„¤ì •í•´ì¤Œ
 multer: ìš”ì²­ë³¸ë¬¸ì˜ ì²¨ë¶€íŒŒì¼ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´

 req.query


6.2.4 cookie-parser
ì¿ í‚¤ ì²˜ë¦¬ìš©
req.cookies

6.2.5 express-session
 ì„¸ì…˜ì²˜ë¦¬ìš©
req.session

6.2.7 multer
req.file

6.3 Router ê°ì²´ë¡œ ë¼ìš°íŒ… ë¶„ë¦¬í•˜ê¸°
app.jsê°€ ì„œë¹„ìŠ¤ê°€ ë§ì•„ì§ì— ë”°ë¼
ê¸¸ì–´ì§„ë‹¤ ---> routerë¡œ ë¶„ë¦¬ì²˜ë¦¬í•˜ë„ë¡ í•œë‹¤.

-routerëŠ” ë¯¸ë“¤ì›¨ì–´ì˜ ì¢…ë¥˜ì¤‘ í•˜ë‚˜

-app.jsì—ì„œ app.get(), app.post() --> ë¼ìš°í„° ë©”ì†Œë“œ

* ë¼ìš°í„° íŒŒì¼ ìƒì„±
1) routes/index.js
2) routes/user.js

* app.jsì— ë¼ìš°í„° ì„¤ì •
252í˜ì´ì§€ ì°¸ê³ 

* ë¼ìš°í„° ì‹¤í–‰ì¤‘ì— next('route') 
  :í•œ urlì— ì„¤ì •ëœ ë‹¤ë¥¸ ë¼ìš°í„°ë¥¼ ìŠ¤í‚µ

* ì‚¬ìš©ìë¡œë¶€í„° ì£¼ì†Œë¡œ ìš”ì²­ ì •ë³´ ì „ë‹¬
  : ì •ê·œí‘œí˜„ì‹ (Regular Expression)
 - /user/:id -- /user/123
  --> req.params.id -- 123 ê°’ì„ ê°€ì§

 - /user/:name
   --> req.params.name
 - /user/:id? key1 = val1 & key2 = val2
   --> req.params.id : 123
       req.query => {key1:val1, key2: val2}
  - /user/xxx ë¼ìš°í„°ë³´ë‹¤ ì•ì— ì‘ì„±í•´ì•¼ í•¨

  - ë™ì¼ urlì— ë©”ì†Œë“œ ë‹¤ë¥¸ ê²½ìš° 
   router.get();
   router.post();
    ---> 
    router.route('/abc')
      .get((req,res) => {
          res.send('GET /abc');
      })
      .post((req,res) => {
          res.send('POST /abc');
      })
      .patch()
      .delete()


6.5.2 ë„Œì ìŠ¤(Nunjucks) : íŒŒì´ì–´í­ìŠ¤ë¥¼ ì‘ì„±í•œ ëª¨ì§ˆë¼ ì¬ë‹¨ htmlë¬¸ë²•ì„ ê¸°ë°˜

  1) ì„¤ì¹˜
  npm i nunjucks

  2) view ì—”ì§„ ì„¤ì •
  app.js 

  6.5.2.1 ë„Œì ìŠ¤ì—ì„œ ë³€ìˆ˜
  htmlì—ì„œ {{ë³€ìˆ˜ëª…}}
  --> ë¼ìš°í„°ì—ì„œ ì „ë‹¬ë°›ì•„ ì‚¬ìš©

  htmlì—ì„œ ìì²´ì—ì„œ ë³€ìˆ˜ì‚¬ìš©
  {% set ë³€ìˆ˜ = 'ê°’' %}
  {% set node = 'ë…¸ë“œì œì´ì—ìŠ¤ì•¼' %}
  {% set js = 'ìë°”ìŠ¤í¬ë¦½íŠ¸ì•¼' %}
  
  * ì´ìŠ¤ì¼€ì´í”„(Escape) <>===> &lt; &gt;
  {{ë³€ìˆ˜ëª… | safe}}
ğŸ˜

  6.5.2.2 ë°˜ë³µë¬¸
 {% ë¬¸ì¥ %}
 * for~in, endfor

 6.5.2.3 ì¡°ê±´ë¬¸
 {% ë¬¸ì¥ %}
 * if ~ elif ~ else ~ endif


6.5.2.4 include
: í¬í•¨í•˜ë‹¤
* include íŒŒì¼ê²½ë¡œ

6.5.2.5 extends ì™€ block
extends : í™•ì¥í•˜ë‹¤.
block : for {}:forë¬¸ ë¸”ë¡

extends : ë ˆì´ì•„ì›ƒ íŒŒì¼ ì •ì˜í•˜ê³  

{% block style %}: 
styleì´ë¦„ì˜ ë¸”ë¡ì´ 
ëŒ€ì²´ë  ë¶€ë¶„ì„ ì§€ì •
{% endblock %}

{% block [ë¸”ë¡ëª…] %}

{% endblock %}

{% extends íŒŒì¼ê²½ë¡œ %}

  




app.set 'port', process.env.PORT || 3000;

app.use(req,res,next) => { // next: ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ í˜¸ì¶œ

}
app.get '/', (req,res,next) => {
    //res.send("ì•ˆë…• ë…¸ë“œ ìµìŠ¤í”„ë ˆìŠ¤");
    //4ì¥ : res.writeHead(), res.write(), res.end()
    res.sendFile.
}